<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>REB Functional Tests: LSST Readout Electronics Boards Testing Suite</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LSSTLogoSmall.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">REB Functional Tests
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Testing suite for the WREB, GREB, and VST readout boards</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">LSST Readout Electronics Boards Testing Suite </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a href="https://bencbartlett.github.io/SLAC/">Documentation</a></h2>
<h2>Introduction</h2>
<p>This is the testing suite for the readout electronics boards for the LSST CCD interface, designed to verify that the boards are defect-free and operating as expected. Note that this program communicates directly with the Jython interpreter to manipulate the board, so it does not need to be loaded into the Jython exectuor and can be run directly from the terminal with python.</p>
<h3>Test versions</h3>
<p>There are three separate versions of this test to cover the three types of readout boards:</p><ol type="1">
<li><a class="el" href="_w_r_e_b_test_8py.html" title="Suite of tests for the WREB controller board. ">WREBTest.py</a>: for the single-stripe corner raft board (WREB)</li>
<li><a class="el" href="_g_r_e_b_test_8py.html" title="Suite of tests for the GREB controller board. ">GREBTest.py</a>: for the double-stripe guider board (GREB)</li>
<li><a class="el" href="_v_s_t_test_8py.html" title="Suite of tests for the VST controller board. ">VSTTest.py</a>: for the triple-stripe science raft board (VST)</li>
</ol>
<p>Presently, the WREB test is fully functional and a board (SN:03) passes all applicable tests. The VST test is also fully functional, though there are some minor gain errors possibly due to invalid resistor values that prevent boards we have tested from being able to pass all tests. The GREBTest is not fully functional, as the CCS system for it was still being developed at the conclusion of my time working on this project, though I have mostly adapted the code to work once the CCS is fully implemented for it.</p>
<h2>External dependencies</h2>
<p>All external dependencies are contained within Anaconda:</p><ul>
<li>astropy</li>
<li>numpy</li>
<li>matplotlib</li>
</ul>
<p>Additionally, the program requires a UNIX dialogs-like executable for the GUI to be run (default), which is installed by default on most Linux systems, including RHEL6.</p>
<h2>Running the testing suite</h2>
<ul>
<li>Ensure Jython console is running (./JythonConsole or the CCS bootstrapper program)</li>
<li>Ensure <code>rebRun.sh</code> is running with the approprate argument (<code>w</code> for WREB, <code>g</code> for GREB, <code>4</code> for VST)</li>
<li><code>python (WREB/GREB/VST)Test.py [options]</code> Initial crashing yielding a <code>ValueError</code> is likely due to a <code>rebRun.sh</code> or <code>JythonConsole</code> crashing or not being loaded.</li>
</ul>
<h2>Subtests</h2>
<h3>Test structure</h3>
<p>Individual tests are structured as classes with four required methods:</p><ul>
<li><code>__init__</code> sets initial variables; minimum required variables are <code>self.title</code> and <code>self.status</code>.</li>
<li><code>runTest</code> is the body of the tests, running the code to execute the tests and storing the results to state variables.</li>
<li><code>summarize</code> writes summary information to the summary object passed to it; this is used in generating the cover page.</li>
<li><code>report</code> writes the portion of the pdf report that the test is responsible for and dumps the raw data into the report directory structure if <code>-d</code> is called with the program.</li>
</ul>
<h3>List of subtests</h3>
<ul>
<li><code>IdleCurrentConsumption</code>: reads the idle current consumption across parts of the readout board. Pass metric: none</li>
<li><code>ChannelTest</code>: obtains the list of comminicable channels. Pass metric: passes if number of channels is the expected value (must be updated, is not current in GREB or VST tests)</li>
<li><code>ASPICcommsTest</code>: tests that the readout board can communicate with the ASPICS. Pass metric: passes if <code>&lt;subsystem&gt; checkAspics</code> returns a list of zeros, indicating the ability to read and write from the ASPIC-associated registers</li>
<li><code>SequencerToggling</code> (WREB test only): toggles the sequencer outputs for the parallel clock, serial clock, and reset gate rails. Pass metric: none</li>
<li><code>CSGate</code> (implemented on all tests, but only functional on WREB test): Tests the performance of the current source gate. Pass metric: not implemented</li>
<li><code>PCKRails</code>: Scales the parallel clock rails over a range of voltages with a constant rail potential difference. Pass metric: upper and lower gain within ROI are close to 1 and fewer than N points are further than X from the expected value.</li>
<li><code>SCKRails</code>: Scales the serial clock rails over a range of voltages with a constant rail potential difference. Pass metric: upper and lower gain within ROI are close to 1 and fewer than N points are further than X from the expected value.</li>
<li><code>SCKRailsDiverging</code>: Scales the serial clock rails over a range of voltages with an increasing rail potential difference. Pass metric: upper and lower gain within ROI are close to 1 and fewer than N points are further than X from the expected value.</li>
<li><code>RGRails</code>: Scales the reset gate rails over a range of voltages with a constant rail potential difference. Pass metric: upper and lower gain within ROI are close to 1 and fewer than N points are further than X from the expected value.</li>
<li><code>RGRailsDiverging</code>: Scales the reset gate clock rails over a range of voltages with an increasing rail potential difference. Pass metric: upper and lower gain within ROI are close to 1 and fewer than N points are further than X from the expected value.</li>
<li><code>OGBias</code>: Tests the output gate performance by scaling it over a range of potentials and testing for linearity. Pass metric: fewer than N points are further than X from the expected value.</li>
<li><code>ODBias</code>: Tests the output drain performance by scaling it over a range of potentials and testing for linearity. Pass metric: fewer than N points are further than X from the expected value.</li>
<li><code>GDBias</code>: Tests the guard drain performance by scaling it over a range of potentials and testing for linearity. Pass metric: fewer than N points are further than X from the expected value.</li>
<li><code>RDBias</code>: Tests the reset drain performance by scaling it over a range of potentials and testing for linearity. Pass metric: fewer than N points are further than X from the expected value.</li>
<li><code>TemperatureLogging</code>: Queries the board's internal trending database to obtain the temperature values while the test has been running. Largely depricated due to poor functionality in the database retrieval program. An alternative is <code>ParameterLogging</code>, which actively queries the board for the desired properties during the course of the test. Pass metric: none</li>
<li><code>ParameterLogging</code>: Actively queries the board in a separate thread for the desired properties while the test is running. Using <code>-l</code> or <code>--logValues</code> while calling the program will allow you to actively log these values without a time limit. Pass metric: none</li>
<li><code>ASPICNoise</code>: Obtains a fits image from each ASPIC in the readout board. Analyses the images to measure the noise distribution and mean pixel value across the image. This test is run with three different sequencers: unclamped, clamped, and reset. Pass metric: no channels have a standard deviation in pixel value larger than X (currently 5.5).</li>
<li><code>ASPICLogging</code>: Continually runs the ASPICNoise tests periodically; this was used for thermocycling testing over long periods of time. This test must be run with <code>-l</code> enabled.</li>
</ul>
<h2>Contact</h2>
<p>My SLAC email (<code>bcb@slac.stanford.edu</code>) will be terminated when I leave SLAC in September. If something is wrong, confusing, or not working, feel free to contact me after I have left SLAC at <code>bartlett@caltech.edu</code>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
